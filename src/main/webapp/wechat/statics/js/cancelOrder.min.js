$(document).ready(function(){$("a.btn-cancel").attr("href","tel://"+sessionStorage.phone),$("#refund").text(sessionStorage.refund)}).on("click","input[type=radio]",function(){var e,t,a,n=this,i=$(this).data("name");if(!i)return!1;e=$(this).parents(".radio-bd"),t=e.find('input[type="radio"][data-name="'+i+'"]'),a=e.find("textarea"),a.attr("disabled",!0),$.each(t,function(){n==this?($(this).data("target")&&a.removeAttr("disabled"),$(this).attr("checked",!0)):$(this).attr("checked",!1)})}),$("a.btn-confirm").click(function(){var e,t=$(":checked"),a=$("textarea");if(a.attr("disabled"))e=t.parents(".weui-flex").find("p").text();else if(e=a.val(),0==e.trim().length)return $.toast("请输入原因","forbidden");$.ajax({url:"/RailwayService/order/cancelMainOrder",data:JSON.stringify({mainOrderId:sessionStorage.orderId,reason:e}),type:"POST",dataType:"json",contentType:"application/json",beforeSend:function(){$.showLoading()},success:function(e){$.hideLoading(),e.success?($.toast("提交请求成功","success"),setTimeout(function(){window.location.href="/RailwayService/wechat/order.html"},2e3)):$.toast(e.message,"forbidden")},error:function(e){$.hideLoading(),$.toast(e.statusText,"forbidden")}})});